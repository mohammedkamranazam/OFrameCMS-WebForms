jQuery.fn.highlight = function (b) { function a(e, j) { var l = 0; if (e.nodeType == 3) { var k = e.data.toUpperCase().indexOf(j); if (k >= 0) { var h = document.createElement("span"); h.className = "highlight"; var f = e.splitText(k); var c = f.splitText(j.length); var d = f.cloneNode(true); h.appendChild(d); f.parentNode.replaceChild(h, f); l = 1 } } else { if (e.nodeType == 1 && e.childNodes && !/(script|style)/i.test(e.tagName)) { for (var g = 0; g < e.childNodes.length; ++g) { g += a(e.childNodes[g], j) } } } return l } return this.each(function () { a(this, b.toUpperCase()) }) }; jQuery.fn.removeHighlight = function () { function a(f) { for (var d = 0, c = f.childNodes, b = c.length; d < b; d++) { var h = c[d]; if (h.nodeType == 1) { a(h); continue } if (h.nodeType != 3) { continue } var e = h.nextSibling; if (e == null || e.nodeType != 3) { continue } var g = h.nodeValue + e.nodeValue; new_node = f.ownerDocument.createTextNode(g); f.insertBefore(new_node, h); f.removeChild(h); f.removeChild(e); d--; b-- } } return this.find("span.highlight").each(function () { var b = this.parentNode; b.replaceChild(this.firstChild, this); a(b) }).end() };